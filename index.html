<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Umzugs- & Hilfe-Service — Landkreis Helmstedt</title>
  <style>
    :root{
      --bg:#ffffff; --text:#111827; --muted:rgba(17,24,39,0.6); --card:#f9fafb; --accent:#0ea5a4;
    }
    [data-theme='dark']{ --bg:#0b1220; --text:#ffffff; --muted:rgba(255,255,255,0.75); --card:#0f1724; --accent:#06b6d4 }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased}
    header{padding:18px 20px; display:flex;gap:12px;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(0,0,0,0.06)}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:56px;height:56px;border-radius:8px;background:linear-gradient(135deg,var(--accent),#7dd3fc);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    main{padding:28px;max-width:980px;margin:0 auto}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(10,10,12,0.04)}
    label{display:block;font-size:13px;margin-bottom:6px}
    input[type=text], input[type=number], select, input[type=date], input[type=time]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);background:transparent;color:var(--text)}
    .row{display:flex;gap:10px}
    .muted{font-size:13px;color:var(--muted)}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:var(--accent);color:white;text-decoration:none;border:none;cursor:pointer}
    .small{padding:8px 10px;font-size:14px}
    footer{padding:18px;text-align:center;color:var(--muted)}
    .note{font-size:13px;color:var(--muted);margin-top:8px}
    .offer{font-size:18px;font-weight:600}
    .toggle{display:flex;align-items:center;gap:8px}
    .chip{display:inline-block;padding:8px 10px;border-radius:999px;background:rgba(0,0,0,0.04)}

    /* animation overlay */
    #introOverlay{position:fixed;inset:0;background:linear-gradient(180deg,#ffffff 0%, #f1f5f9 100%);display:flex;align-items:center;justify-content:center;z-index:9999}
    [data-theme='dark'] #introOverlay{background:linear-gradient(180deg,#071025 0%, #071423 100%)}
    #boxWrap{width:260px;height:220px;display:flex;align-items:center;justify-content:center;flex-direction:column}
    .box{width:180px;height:120px;position:relative;perspective:800px}
    .box .base{width:100%;height:100%;background:#d6b370;border-radius:6px;position:relative;transform-origin:center;box-shadow:0 8px 24px rgba(2,6,23,0.08)}
    .lid{position:absolute;left:0;top:-18px;width:100%;height:38px;background:#b3873f;border-radius:6px;transform-origin:10% 100%;}
    .tape{position:absolute;left:50%;transform:translateX(-50%);top:38px;width:60%;height:18px;background:linear-gradient(90deg,#fff4cc,#fff1b6);border-radius:2px}
    .open{animation:openLid 1.2s ease forwards}
    @keyframes openLid{0%{transform:rotateX(0)}60%{transform:rotateX(-120deg)}100%{transform:rotateX(-130deg);opacity:1}}
    .fadeOut{animation:fadeOut 0.9s ease 1s forwards}
    @keyframes fadeOut{to{opacity:0;transform:translateY(-12px);visibility:hidden}}

    /* responsive */
    @media (max-width:900px){.grid{grid-template-columns:1fr}.brand h1{display:none}}
  </style>
</head>
<body>
  <!-- Intro animation overlay -->
  <div id="introOverlay" aria-hidden="false">
    <div id="boxWrap">
      <div class="box" id="box">
        <div class="lid" id="lid"></div>
        <div class="tape"></div>
        <div class="base"></div>
      </div>
      <div style="margin-top:14px;text-align:center">
        <div style="font-weight:700;font-size:18px">Willkommen</div>
        <div class="muted">Kurz warten — das Paket öffnet sich…</div>
      </div>
    </div>
  </div>

  <header>
    <div class="brand">
      <div class="logo">UM</div>
      <div>
        <h1 style="margin:0;font-size:18px">Umzugs- & Hilfe-Service</h1>
        <div class="muted">Nur Landkreis Helmstedt (PLZ 38350)</div>
      </div>
    </div>
    <div style="display:flex;gap:12px;align-items:center">
      <div class="chip">Servicegebiet: Landkreis Helmstedt (alle Orte)</div>
      <div class="toggle card" style="padding:8px">
        <label style="font-size:13px;margin:0 0 6px 0">Darkmode</label>
        <div style="display:flex;gap:8px;align-items:center">
          <input id="themeToggle" type="checkbox" aria-label="Darkmode aktivieren" />
          <small class="muted">an/aus</small>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="grid">
      <section class="card" aria-labelledby="simTitle">
        <h2 id="simTitle">Angebotssimulation</h2>
        <p class="muted">Simuliere direkt ein Angebot — gültig nur für PLZ 38350 (Landkreis Helmstedt). Wenn PLZ ≠ 38350 wird die Anfrage abgewiesen.</p>

        <div style="margin-top:12px">
          <label>PLZ (nur 38350 gültig)</label>
          <input id="plzInput" type="text" placeholder="z. B. 38350" value="38350" />
        </div>

        <div style="display:flex;gap:10px;margin-top:12px">
          <div style="flex:1">
            <label>Ort (Stadt / Dorf)</label>
            <input id="cityInput" type="text" placeholder="z. B. Helmstedt" value="Helmstedt" />
          </div>
          <div style="width:120px">
            <label>Personen</label>
            <input id="helpers" type="number" min="1" value="1" />
          </div>
        </div>

        <div style="display:flex;gap:10px;margin-top:12px">
          <div style="flex:1">
            <label>Stunden (geschätzt)</label>
            <input id="hours" type="number" min="0" step="0.5" value="2" />
          </div>
          <div style="width:140px">
            <label>Preis / Std (EUR)</label>
            <input id="rate" type="number" min="0" value="25" />
          </div>
        </div>

        <div style="margin-top:12px">
          <label>Extra-Notizen (frei)</label>
          <input id="notes" type="text" placeholder="z. B. enge Treppen, viele Pakete" />
        </div>

        <div style="display:flex;gap:10px;margin-top:14px;align-items:center">
          <button class="btn" id="calcBtn">Angebot berechnen</button>
          <button class="btn small" id="bookBtn">Als Person buchen</button>
          <button class="small" id="downloadBtn" style="background:#111827">HTML herunterladen</button>
        </div>

        <div id="result" class="card" style="margin-top:14px;background:transparent;padding:10px;border-radius:8px;border:1px dashed rgba(0,0,0,0.06)"></div>

        <p class="note">Wichtig: Ich verfüge über kein Fahrzeug und keinen Führerschein — ich werde als helfende Person gebucht (keine Möbellieferung, kein Transport).</p>
      </section>

      <aside class="card">
        <h3>Übersicht</h3>
        <ul>
          <li>Servicegebiet: <strong>Landkreis Helmstedt (PLZ 38350)</strong> — alle Dörfer und Städte innerhalb dieser PLZ sind zugelassen.</li>
          <li>Anfahrtskosten: Standard innerhalb Landkreis Helmstedt: <strong>15 €</strong>.</li>
          <li><strong>Wichtig:</strong> Orte außerhalb der PLZ 38350 (z. B. andere Landkreise) sind nicht zugelassen.</li>
          <li>Buchung ist nur als Person zum Helfen möglich (kein Fahrzeug / kein Führerschein).</li>
        </ul>

        <div style="margin-top:12px">
          <h4>Quick-Preise</h4>
          <p class="muted">(Beispiel)</p>
          <div class="offer">1 Person × 2 Std × 25 €/Std = 50 €</div>
          <div class="muted">+ Anfahrt 15 € (sofern Ort innerhalb PLZ 38350)</div>
        </div>

        <div style="margin-top:14px;display:flex;flex-direction:column;gap:8px">
          <button class="btn" id="resetBtn">Formular zurücksetzen</button>
          <a class="btn" id="contactBtn" href="#bookingForm" style="text-align:center;display:block">Zum Buchungsformular</a>
        </div>
      </aside>
    </div>

    <section id="bookingForm" class="card" style="margin-top:20px">
      <h2>Buchung / Anfrage</h2>
      <p class="muted">Fülle das Formular aus — ich werde als helfende Person gebucht. Keine Fahrzeugnutzung. PLZ muss <strong>38350</strong> sein.</p>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px">
        <div>
          <label>Vor- und Nachname</label>
          <input id="name" type="text" />
        </div>
        <div>
          <label>Telefon oder E-Mail</label>
          <input id="contact" type="text" />
        </div>
        <div>
          <label>Datum</label>
          <input id="date" type="date" />
        </div>
        <div>
          <label>Uhrzeit</label>
          <input id="time" type="time" />
        </div>
      </div>

      <div style="margin-top:12px">
        <label>Ort (Stadt / Dorf)</label>
        <input id="cityBooking" type="text" placeholder="z. B. Helmstedt" />
      </div>

      <div style="margin-top:12px">
        <label>Bestätigte PLZ</label>
        <input id="plzConfirm" type="text" placeholder="38350" />
      </div>

      <div style="display:flex;gap:8px;margin-top:12px">
        <button class="btn" id="submitBooking">Anfrage absenden</button>
        <button class="small" id="clearBooking">Leeren</button>
      </div>

      <div id="bookingMsg" class="muted" style="margin-top:10px"></div>
    </section>

  </main>

  <footer>
    © Umzugs- & Hilfe-Service — Landkreis Helmstedt • PLZ 38350
  </footer>

  <script>
    // Theme handling — ensure text colors switch correctly in darkmode
    const root = document.documentElement;
    const themeToggle = document.getElementById('themeToggle');
    function applyTheme(dark){
      if(dark) document.documentElement.setAttribute('data-theme','dark');
      else document.documentElement.removeAttribute('data-theme');
      localStorage.setItem('themeDark', dark? '1':'0');
      themeToggle.checked = dark;
    }
    const stored = localStorage.getItem('themeDark');
    applyTheme(stored === '1');
    themeToggle.addEventListener('change', ()=> applyTheme(themeToggle.checked));

    // Intro animation (box opening)
    const lid = document.getElementById('lid');
    const box = document.getElementById('box');
    const overlay = document.getElementById('introOverlay');
    setTimeout(()=>{
      lid.classList.add('open');
      setTimeout(()=>{
        overlay.classList.add('fadeOut');
        overlay.setAttribute('aria-hidden','true');
        setTimeout(()=>overlay.style.display='none',1200);
      },1200);
    },400);

    // Simulation logic
    const calcBtn = document.getElementById('calcBtn');
    const result = document.getElementById('result');
    const plzInput = document.getElementById('plzInput');
    const cityInput = document.getElementById('cityInput');

    function calculate(){
      const plz = (plzInput.value||'').trim();
      const city = (cityInput.value||'').trim().toLowerCase();
      const hours = parseFloat(document.getElementById('hours').value)||0;
      const helpers = parseInt(document.getElementById('helpers').value)||1;
      const rate = parseFloat(document.getElementById('rate').value)||0;
      const notes = document.getElementById('notes').value||'';

      // Enforce service area: only PLZ 38350
      if(plz !== '38350'){
        result.innerHTML = `<div style="color:#b91c1c;font-weight:700">Außerhalb des Servicegebiets</div><div class='muted'>Aktuell arbeiten wir nur innerhalb der PLZ 38350 (Landkreis Helmstedt).</div>`;
        return;
      }

      // Anfahrtskosten: standard 15 EUR for all places within PLZ 38350
      let travel = 15;

      // Calculate
      const labor = rate * hours * helpers;
      const total = Math.round((labor + travel) * 100) / 100;

      result.innerHTML = `
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div class="muted">Arbeitszeit</div>
            <div class="offer">${helpers} Person(en) × ${hours} Std × ${rate} €/Std = ${labor.toFixed(2)} €</div>
          </div>
          <div style="text-align:right">
            <div class="muted">Anfahrt</div>
            <div class="offer">${travel.toFixed(2)} €</div>
          </div>
        </div>
        <hr style="margin:10px 0;border:none;border-top:1px dashed rgba(0,0,0,0.06)" />
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div class="muted">Gesamt</div>
          <div class="offer">${total.toFixed(2)} €</div>
        </div>
        <div class="muted" style="margin-top:8px">Notiz: ${notes || 'keine'}</div>
      `;
    }

    calcBtn.addEventListener('click', calculate);

    // Booking logic (front-end validation)
    document.getElementById('submitBooking').addEventListener('click', ()=>{
      const name = document.getElementById('name').value.trim();
      const contact = document.getElementById('contact').value.trim();
      const plz = document.getElementById('plzConfirm').value.trim();
      const date = document.getElementById('date').value;
      const city = document.getElementById('cityBooking').value.trim().toLowerCase();

      if(!name || !contact || !date || plz !== '38350'){
        document.getElementById('bookingMsg').textContent = 'Bitte Name, Kontakt, Datum angeben und PLZ muss 38350 sein.';
        return;
      }

      // Treat Schöningen as outside the service area if user mentioned it specifically
      if(city === 'schöningen'){
        document.getElementById('bookingMsg').textContent = 'Schöningen liegt außerhalb des aktuellen Servicegebiets. Bitte anderen Ort innerhalb PLZ 38350 angeben.';
        return;
      }

      document.getElementById('bookingMsg').textContent = 'Danke — Anfrage eingegangen. Du wirst kontaktiert.';
    });

    document.getElementById('clearBooking').addEventListener('click', ()=>{
      ['name','contact','date','time','plzConfirm','cityBooking'].forEach(id=> document.getElementById(id).value='');
      document.getElementById('bookingMsg').textContent='';
    });

    document.getElementById('resetBtn').addEventListener('click', ()=>{
      document.getElementById('plzInput').value='38350';
      document.getElementById('cityInput').value='Helmstedt';
      document.getElementById('hours').value=2;
      document.getElementById('rate').value=25;
      document.getElementById('helpers').value=1;
      document.getElementById('notes').value='';
      result.innerHTML='';
    });

    // Download current HTML as file (kept as requested previously)
    document.getElementById('downloadBtn').addEventListener('click', ()=>{
      const doc = '<!doctype html>
' + document.documentElement.outerHTML;
      const blob = new Blob([doc], {type: 'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'helmstedt_service.html';
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=>URL.revokeObjectURL(url),10000);
    });

    // Book as person button pre-fills booking form
    document.getElementById('bookBtn').addEventListener('click', ()=>{
      window.location.hash = '#bookingForm';
      document.getElementById('plzConfirm').value = document.getElementById('plzInput').value;
      document.getElementById('cityBooking').value = document.getElementById('cityInput').value;
      document.getElementById('bookingMsg').textContent = 'Bitte Formular ausfüllen und absenden. (Hinweis: keine Fahrzeugnutzung)';
    });

  </script>
</body>
</html>
